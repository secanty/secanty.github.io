{"version":3,"file":"../../../live2d/js/pio.js","names":["Paul_Pio","prop","that","this","current","idol","menu","document","querySelector","canvas","getElementById","body","root","location","protocol","hostname","modules","model","length","create","tag","e","createElement","class","className","rand","arr","Math","floor","random","render","text","constructor","Array","dialog","innerHTML","String","classList","add","clearTimeout","t","setTimeout","remove","destroy","initHidden","localStorage","setItem","isMobile","ua","window","navigator","userAgent","toLowerCase","indexOf","innerWidth","elements","home","skin","info","night","close","show","appendChild","action","welcome","referrer","href","content","referer","replace","tips","hour","Date","getHours","touch","onclick","buttons","onmouseover","loadlive2d","onModelLoad","open","link","eval","custom","forEach","type","querySelectorAll","selector","j","innerText","begin","static","fixed","draggable","onmousedown","downEvent","clientX","offsetLeft","clientY","offsetTop","move","moveEvent","style","left","top","bottom","addEventListener","removeEventListener","init","onlyText","hidden","mode","getItem","console","log"],"sources":["live2d/js/pio.js"],"mappings":"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","ignoreList":[],"sourcesContent":["/* ----\n\n# Pio Plugin\n# By: Dreamer-Paul\n# Modify: journey-ad\n# Last Update: 2021.5.4\n\n一个支持更换 Live2D 模型的 Typecho 插件。\n\n本代码为奇趣保罗原创，并遵守 GPL 2.0 开源协议。欢迎访问我的博客：https://paugram.com\n\n---- */\n\nvar Paul_Pio = function (prop) {\n    var that = this;\n\n    var current = {\n        idol: 0,\n        menu: document.querySelector(\".pio-container .pio-action\"),\n        canvas: document.getElementById(\"pio\"),\n        body: document.querySelector(\".pio-container\"),\n        root: document.location.protocol + '//' + document.location.hostname + '/'\n    };\n\n    /* - 方法 */\n    var modules = {\n        // 更换模型\n        idol: function () {\n            current.idol < (prop.model.length - 1) ? current.idol++ : current.idol = 0;\n            return current.idol;\n        },\n        // 创建内容\n        create: function (tag, prop) {\n            var e = document.createElement(tag);\n            if (prop.class) e.className = prop.class;\n            return e;\n        },\n        // 随机内容\n        rand: function (arr) {\n            return arr[Math.floor(Math.random() * arr.length + 1) - 1];\n        },\n        // 创建对话框方法\n        render: function (text) {\n            if (text.constructor === Array) {\n                dialog.innerHTML = modules.rand(text);\n            }\n            else if (text.constructor === String) {\n                dialog.innerHTML = text;\n            }\n            else {\n                dialog.innerHTML = \"输入内容出现问题了 X_X\";\n            }\n\n            dialog.classList.add(\"active\");\n\n            clearTimeout(this.t);\n            this.t = setTimeout(function () {\n                dialog.classList.remove(\"active\");\n            }, 3000);\n        },\n        // 移除方法\n        destroy: function () {\n            that.initHidden();\n            localStorage.setItem(\"posterGirl\", 0);\n        },\n        // 是否为移动设备\n        isMobile: function () {\n            var ua = window.navigator.userAgent.toLowerCase();\n            ua = ua.indexOf(\"mobile\") || ua.indexOf(\"android\") || ua.indexOf(\"ios\");\n\n            return window.innerWidth < 500 || ua !== -1;\n        }\n    };\n    this.modules = modules;\n    this.destroy = modules.destroy;\n\n    var elements = {\n        home: modules.create(\"span\", { class: \"pio-home\" }),\n        skin: modules.create(\"span\", { class: \"pio-skin\" }),\n        info: modules.create(\"span\", { class: \"pio-info\" }),\n        night: modules.create(\"span\", { class: \"pio-night\" }),\n        close: modules.create(\"span\", { class: \"pio-close\" }),\n\n        show: modules.create(\"div\", { class: \"pio-show\" })\n    };\n\n    var dialog = modules.create(\"div\", { class: \"pio-dialog\" });\n    current.body.appendChild(dialog);\n    current.body.appendChild(elements.show);\n\n    /* - 提示操作 */\n    var action = {\n        // 欢迎\n        welcome: function () {\n            if (document.referrer !== \"\" && document.referrer.indexOf(current.root) === -1) {\n                var referrer = document.createElement('a');\n                referrer.href = document.referrer;\n                prop.content.referer ? modules.render(prop.content.referer.replace(/%t/, \"“\" + referrer.hostname + \"”\")) : modules.render(\"欢迎来自 “\" + referrer.hostname + \"” 的朋友！\");\n            }\n            else if (prop.tips) {\n                var text, hour = new Date().getHours();\n\n                if (hour > 22 || hour <= 5) {\n                    text = '你是夜猫子呀？这么晚还不睡觉，明天起的来嘛';\n                }\n                else if (hour > 5 && hour <= 8) {\n                    text = '早上好！';\n                }\n                else if (hour > 8 && hour <= 11) {\n                    text = '上午好！工作顺利嘛，不要久坐，多起来走动走动哦！';\n                }\n                else if (hour > 11 && hour <= 14) {\n                    text = '中午了，工作了一个上午，现在是午餐时间！';\n                }\n                else if (hour > 14 && hour <= 17) {\n                    text = '午后很容易犯困呢，今天的运动目标完成了吗？';\n                }\n                else if (hour > 17 && hour <= 19) {\n                    text = '傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红~';\n                }\n                else if (hour > 19 && hour <= 21) {\n                    text = '晚上好，今天过得怎么样？';\n                }\n                else if (hour > 21 && hour <= 23) {\n                    text = '已经这么晚了呀，早点休息吧，晚安~';\n                }\n                else {\n                    text = \"奇趣保罗说：这个是无法被触发的吧，哈哈\";\n                }\n\n                modules.render(text);\n            }\n            else {\n                modules.render(prop.content.welcome || \"欢迎来到本站！\");\n            }\n        },\n        // 触摸\n        touch: function () {\n            current.canvas.onclick = function () {\n                modules.render(prop.content.touch || [\"你在干什么？\", \"再摸我就报警了！\", \"HENTAI!\", \"不可以这样欺负我啦！\"]);\n            };\n        },\n        // 右侧按钮\n        buttons: function () {\n            // 返回首页\n            elements.home.onclick = function () {\n                location.href = current.root;\n            };\n            elements.home.onmouseover = function () {\n                modules.render(prop.content.home || \"点击这里回到首页！\");\n            };\n            current.menu.appendChild(elements.home);\n\n            // 更换模型\n            elements.skin.onclick = function () {\n                that.model = loadlive2d(\"pio\", prop.model[modules.idol()], model => {\n                    prop.onModelLoad && prop.onModelLoad(model)\n                    prop.content.skin && prop.content.skin[1] ? modules.render(prop.content.skin[1]) : modules.render(\"新衣服真漂亮~\");\n                });\n            };\n            elements.skin.onmouseover = function () {\n                prop.content.skin && prop.content.skin[0] ? modules.render(prop.content.skin[0]) : modules.render(\"想看看我的新衣服吗？\");\n            };\n            if (prop.model.length > 1) current.menu.appendChild(elements.skin);\n\n            // 关于我\n            elements.info.onclick = function () {\n                window.open(prop.content.link || \"https://paugram.com/coding/add-poster-girl-with-plugin.html\");\n            };\n            elements.info.onmouseover = function () {\n                modules.render(\"想了解更多关于我的信息吗？\");\n            };\n            current.menu.appendChild(elements.info);\n\n            // 夜间模式\n            if (prop.night) {\n                elements.night.onclick = function () {\n                    eval(prop.night);\n                };\n                elements.night.onmouseover = function () {\n                    modules.render(\"夜间点击这里可以保护眼睛呢\");\n                };\n                current.menu.appendChild(elements.night);\n            }\n\n            // 关闭看板娘\n            elements.close.onclick = function () {\n                modules.destroy();\n            };\n            elements.close.onmouseover = function () {\n                modules.render(prop.content.close || \"QWQ 下次再见吧~\");\n            };\n            current.menu.appendChild(elements.close);\n        },\n        custom: function () {\n            prop.content.custom.forEach(function (t) {\n                if (!t.type) t.type = \"default\";\n                var e = document.querySelectorAll(t.selector);\n\n                if (e.length) {\n                    for (var j = 0; j < e.length; j++) {\n                        if (t.type === \"read\") {\n                            e[j].onmouseover = function () {\n                                modules.render(\"想阅读 %t 吗？\".replace(/%t/, \"“\" + this.innerText + \"”\"));\n                            }\n                        }\n                        else if (t.type === \"link\") {\n                            e[j].onmouseover = function () {\n                                modules.render(\"想了解一下 %t 吗？\".replace(/%t/, \"“\" + this.innerText + \"”\"));\n                            }\n                        }\n                        else if (t.text) {\n                            e[j].onmouseover = function () {\n                                modules.render(t.text);\n                            }\n                        }\n                    }\n                }\n            });\n        }\n    };\n\n    /* - 运行 */\n    var begin = {\n        static: function () {\n            current.body.classList.add(\"static\");\n        },\n        fixed: function () {\n            action.touch(); action.buttons();\n        },\n        draggable: function () {\n            action.touch(); action.buttons();\n\n            var body = current.body;\n            body.onmousedown = function (downEvent) {\n                var location = {\n                    x: downEvent.clientX - this.offsetLeft,\n                    y: downEvent.clientY - this.offsetTop\n                };\n\n                function move(moveEvent) {\n                    body.classList.add(\"active\");\n                    body.classList.remove(\"right\");\n                    body.style.left = (moveEvent.clientX - location.x) + 'px';\n                    body.style.top = (moveEvent.clientY - location.y) + 'px';\n                    body.style.bottom = \"auto\";\n                }\n\n                document.addEventListener(\"mousemove\", move);\n                document.addEventListener(\"mouseup\", function () {\n                    body.classList.remove(\"active\");\n                    document.removeEventListener(\"mousemove\", move);\n                });\n            };\n        }\n    };\n\n    // 运行\n    this.init = function (onlyText) {\n        if (!(prop.hidden && modules.isMobile())) {\n            if (!onlyText) {\n                action.welcome();\n                that.model = loadlive2d(\"pio\", prop.model[0], model => {\n                    prop.onModelLoad && prop.onModelLoad(model)\n                });\n            }\n\n            switch (prop.mode) {\n                case \"static\": begin.static(); break;\n                case \"fixed\": begin.fixed(); break;\n                case \"draggable\": begin.draggable(); break;\n            }\n\n            if (prop.content.custom) action.custom();\n        }\n    };\n\n    // 隐藏状态\n    this.initHidden = function () {\n        current.body.classList.add(\"hidden\");\n        dialog.classList.remove(\"active\");\n\n        elements.show.onclick = function () {\n            current.body.classList.remove(\"hidden\");\n            localStorage.setItem(\"posterGirl\", 1);\n            that.init();\n        }\n    }\n\n    localStorage.getItem(\"posterGirl\") == 0 ? this.initHidden() : this.init();\n};\n\n// 请保留版权说明\nif (window.console && window.console.log) {\n    console.log(\"%c Pio %c https://paugram.com \", \"color: #fff; margin: 1em 0; padding: 5px 0; background: #673ab7;\", \"margin: 1em 0; padding: 5px 0; background: #efefef;\");\n}"]}